# FirebaseAuthenticationBundle
A lightweight, self-contained, zero-dependency, spec-compliant Symfony bundle providing authentication with Firebase JWT out of the box.

The only parameter you have to set is your Firebase project's ID in the `FIREBASE_PROJECT_ID` environment variable:

```env
# .env
FIREBASE_PROJECT_ID=your-project-id
```

Add the `firebase` authenticator to any of your app's firewall:

```yaml
# config/packages/security.yaml
security:
    firewalls:
        main:
            stateless: true
            firebase: ~
```
and authenticate your requests sending the *ID token* (generated by the Auth package of the Firebase client SDK you're using) into an `Authorization: Bearer` HTTP header (accordingly to [the OAuth 2.0 specification](https://datatracker.ietf.org/doc/html/rfc6750#section-2.1)).

That's it! If the token is valid and **the email is verified**, the authenticated user will be identified using the `email` claim in the JWT payload.

Optionally, you can add a `leeway` (as a positive integer number of seconds) on a per-firewall basis to account for clock skew with Google's servers:

```yaml
# config/packages/security.yaml
security:
    firewalls:
        main:
            stateless: true
            firebase:
                leeway: 60
```

## Notes
To leverage the features provided by this bundle work, it's given for granted that:
- you're using an authentication method on Firebase which relies on emails (e.g. email and password authentication, Google authentication etc);
- your Symfony users are identified by their email - usually you're likely to have a `User` class/entity implementing the `UserInterface::getUserIdentifier()` method as follows:

```php
# src/Entity/User.php
class User implements UserInterface
{
    private string $email;
    
    public function getUserIdentifier(): string
    {
        return (string) $this->email;
    }
}
```
